<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_11) on Sun Aug 21 00:57:11 CEST 2011 -->
<TITLE>
WorldServer (Swift Socket Server)
</TITLE>

<META NAME="date" CONTENT="2011-08-21">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="WorldServer (Swift Socket Server)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/WorldServer.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html" title="interface in org.codemonkey.swiftworldserver"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/codemonkey/swiftworldserver/WorldServer.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="WorldServer.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.codemonkey.swiftworldserver</FONT>
<BR>
Class WorldServer&lt;T extends <A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html" title="interface in org.codemonkey.swiftworldserver">WorldContext</A>&gt;</H2>
<PRE>
<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>org.codemonkey.swiftworldserver.WorldServer&lt;T&gt;</B>
</PRE>
<DL>
<DT><DT><B>Type Parameters:</B><DD><CODE>T</CODE> - A specific <A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html" title="interface in org.codemonkey.swiftworldserver"><CODE>WorldContext</CODE></A> implementation, such a some game or a simulation.</DL>
<HR>
<DL>
<DT><PRE>public final class <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.30"><B>WorldServer&lt;T extends <A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html" title="interface in org.codemonkey.swiftworldserver">WorldContext</A>&gt;</B></A><DT>extends <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></DL>
</PRE>

<P>
The World Server class adds a thin layer around the <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html" title="class in org.codemonkey.swiftsocketserver"><CODE>SwiftSocketServer</CODE></A> to ease the management of a world state, or simulation /
 game state. It does not handle clients or connections, only client messages in the context of a specific world implementation.
 <p>
 The most important aspect of this layer is the heart beat implementation that invokes updates on the given world context, based on a
 given frame per second. This FPS number determines how often the world or simulation is updated, while providing a delta factor
 indicating the number of seconds per frame as a scale. For example, with an FPS of 4, every 250ms an update is invoked with a value of
 0,25. Lag is not accounted for (ie. the scale is not increased when an update takes too long). A higher FPS means faster but smaller
 updates, while lower FPS means less updates which are larger each time (also see <A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#secondsPerFrame"><CODE>secondsPerFrame</CODE></A>).
 <p>
 The World Server allows us to execute decoded client messages against a known context (your game class for example), so that the
 executable message can then invoke specific methods on your <A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html" title="interface in org.codemonkey.swiftworldserver"><CODE>WorldContext</CODE></A> implementation.
 <p>
 This class keeps polling the server for unprocessed messages and executes them when they become available.
<P>

<P>
<DL>
<DT><B>Since:</B></DT>
  <DD>1.0</DD>
<DT><B>Author:</B></DT>
  <DD>Benny Bottema</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html" title="type parameter in WorldServer">T</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#context">context</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The <A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html" title="interface in org.codemonkey.swiftworldserver"><CODE>WorldContext</CODE></A> implementation against which all executable messages are executed against.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;org.apache.log4j.Logger</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#LOGGER">LOGGER</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#secondsPerFrame">secondsPerFrame</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The scaling factor calculated based on the frame per second passed in the constructor of this class.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;<A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html" title="class in org.codemonkey.swiftsocketserver">SwiftSocketServer</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#server">server</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The server that we simply start and listen to for new messages.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#WorldServer(int, T, double)">WorldServer</A></B>(int&nbsp;port,
                       <A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html" title="type parameter in WorldServer">T</A>&nbsp;context,
                       double&nbsp;framesPerSecond)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Starts a new default TCP swift socket server on the given port, performing updates based on the given frame per second.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#WorldServer(int, T, double, org.codemonkey.swiftsocketserver.ServerType)">WorldServer</A></B>(int&nbsp;port,
                       <A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html" title="type parameter in WorldServer">T</A>&nbsp;context,
                       double&nbsp;framesPerSecond,
                       <A HREF="../../../org/codemonkey/swiftsocketserver/ServerType.html" title="enum in org.codemonkey.swiftsocketserver">ServerType</A>&nbsp;serverType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Starts a new swift socket server of a specific type (TCP / UDP) on the given port, performing updates based on the given frame per
 second.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#broadcastMessage(org.codemonkey.swiftsocketserver.ServerMessageToClient)">broadcastMessage</A></B>(<A HREF="../../../org/codemonkey/swiftsocketserver/ServerMessageToClient.html" title="class in org.codemonkey.swiftsocketserver">ServerMessageToClient</A>&nbsp;serverMessage)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send a message to all connected clients ignoring the client context in the message, by delegating this call to
 <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#broadcastMessage(org.codemonkey.swiftsocketserver.ServerMessageToClient)"><CODE>SwiftSocketServer.broadcastMessage(ServerMessageToClient)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#registerClientMessageToServerType(int, java.lang.Class)">registerClientMessageToServerType</A></B>(int&nbsp;messageId,
                                                                   <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</A>&lt;? extends <A HREF="../../../org/codemonkey/swiftsocketserver/ClientMessageToServer.html" title="class in org.codemonkey.swiftsocketserver">ClientMessageToServer</A>&lt;<A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html" title="type parameter in WorldServer">T</A>&gt;&gt;&nbsp;messageType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registers a client-to-server message on the given unique identifier on the swift socket server, by delegating to
 <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#registerClientMessageToServerType(int, java.lang.Class)"><CODE>SwiftSocketServer.registerClientMessageToServerType(int, Class)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#registerServerMessageToClientId(int, java.lang.Class)">registerServerMessageToClientId</A></B>(int&nbsp;messageId,
                                                               <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</A>&lt;? extends <A HREF="../../../org/codemonkey/swiftsocketserver/ServerMessageToClient.html" title="class in org.codemonkey.swiftsocketserver">ServerMessageToClient</A>&gt;&nbsp;messageType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registers a server-to-client message on the given unique identifier on the swift socket server, by delegating to
 <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#registerServerMessageToClientId(int, java.lang.Class)"><CODE>SwiftSocketServer.registerServerMessageToClientId(int, Class)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#sendMessage(org.codemonkey.swiftsocketserver.ServerMessageToClient)">sendMessage</A></B>(<A HREF="../../../org/codemonkey/swiftsocketserver/ServerMessageToClient.html" title="class in org.codemonkey.swiftsocketserver">ServerMessageToClient</A>&nbsp;serverMessage)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends a message to the client context stored in the message by delegating this call to
 <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#sendMessage(org.codemonkey.swiftsocketserver.ServerMessageToClient)"><CODE>SwiftSocketServer.sendMessage(ServerMessageToClient)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#setFramesPerSecond(double)">setFramesPerSecond</A></B>(double&nbsp;framesPerSecond)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Changes how often the server invokes <A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html#updateWorld(double)"><CODE>WorldContext.updateWorld(double)</CODE></A> and how big the delta factor is (by recalculating
 seconds-per-frame).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#setPingPongMode(boolean)">setPingPongMode</A></B>(boolean&nbsp;pingPongMode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delegates to <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#setPingPongMode(boolean)"><CODE>SwiftSocketServer.setPingPongMode(boolean)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#setPingPongMode(boolean, int, int)">setPingPongMode</A></B>(boolean&nbsp;pingPongMode,
                               int&nbsp;pingPongIntervalMs,
                               int&nbsp;pingPongTimeoutMs)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delegates to <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#setPingPongMode(boolean, int, int)"><CODE>SwiftSocketServer.setPingPongMode(boolean, int, int)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#start()">start</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calls <A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html#initWorld()"><CODE>WorldContext.initWorld()</CODE></A> before starting the server, after which the server starts handling client connections,
 incoming messages and world updates.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html#stop()">stop</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stops the Swift Socket Server by delegating this call to <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#stop()"><CODE>SwiftSocketServer.stop()</CODE></A>.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="LOGGER"><!-- --></A><H3>
LOGGER</H3>
<PRE>
private static final org.apache.log4j.Logger <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.32"><B>LOGGER</B></A></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="server"><!-- --></A><H3>
server</H3>
<PRE>
final <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html" title="class in org.codemonkey.swiftsocketserver">SwiftSocketServer</A> <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.37"><B>server</B></A></PRE>
<DL>
<DD>The server that we simply start and listen to for new messages. All registered message types are delegated to this server instance.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="secondsPerFrame"><!-- --></A><H3>
secondsPerFrame</H3>
<PRE>
private double <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.46"><B>secondsPerFrame</B></A></PRE>
<DL>
<DD>The scaling factor calculated based on the frame per second passed in the constructor of this class.
 <p>
 You may use this to determine the size of the change set in your world simulation, as it changes proportionally and in conjunction
 with the FPS. Higher FPS means smaller changes each frame, while lower FP means larger changes each frame. This way you may throttle
 the FPs, while keeping simulation progress constant.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="context"><!-- --></A><H3>
context</H3>
<PRE>
private final <A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html" title="type parameter in WorldServer">T</A> extends <A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html" title="interface in org.codemonkey.swiftworldserver">WorldContext</A> <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.51"><B>context</B></A></PRE>
<DL>
<DD>The <A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html" title="interface in org.codemonkey.swiftworldserver"><CODE>WorldContext</CODE></A> implementation against which all executable messages are executed against.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="WorldServer(int,org.codemonkey.swiftworldserver.WorldContext,double)"><!-- --></A><A NAME="WorldServer(int, T, double)"><!-- --></A><H3>
WorldServer</H3>
<PRE>
public <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.61"><B>WorldServer</B></A>(int&nbsp;port,
                   <A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html" title="type parameter in WorldServer">T</A>&nbsp;context,
                   double&nbsp;framesPerSecond)</PRE>
<DL>
<DD>Starts a new default TCP swift socket server on the given port, performing updates based on the given frame per second.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>port</CODE> - The port on which the server should listen.<DD><CODE>context</CODE> - The context on which client messages are executed against.<DD><CODE>framesPerSecond</CODE> - The number of updates per second your world should perform.<DT><B>See Also:</B><DD><A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#SwiftSocketServer(int)"><CODE>SwiftSocketServer.SwiftSocketServer(int)</CODE></A></DL>
</DL>
<HR>

<A NAME="WorldServer(int,org.codemonkey.swiftworldserver.WorldContext,double,org.codemonkey.swiftsocketserver.ServerType)"><!-- --></A><A NAME="WorldServer(int, T, double, org.codemonkey.swiftsocketserver.ServerType)"><!-- --></A><H3>
WorldServer</H3>
<PRE>
public <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.75"><B>WorldServer</B></A>(int&nbsp;port,
                   <A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html" title="type parameter in WorldServer">T</A>&nbsp;context,
                   double&nbsp;framesPerSecond,
                   <A HREF="../../../org/codemonkey/swiftsocketserver/ServerType.html" title="enum in org.codemonkey.swiftsocketserver">ServerType</A>&nbsp;serverType)</PRE>
<DL>
<DD>Starts a new swift socket server of a specific type (TCP / UDP) on the given port, performing updates based on the given frame per
 second.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>port</CODE> - The port on which the server should listen.<DD><CODE>context</CODE> - The context on which client messages are executed against.<DD><CODE>framesPerSecond</CODE> - The number of updates per second your world should perform.<DD><CODE>serverType</CODE> - The type of server <A HREF="../../../org/codemonkey/swiftsocketserver/ServerType.html" title="enum in org.codemonkey.swiftsocketserver"><CODE>ServerType</CODE></A> (TCP or UDP).<DT><B>See Also:</B><DD><A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#SwiftSocketServer(int, org.codemonkey.swiftsocketserver.ServerType)"><CODE>SwiftSocketServer.SwiftSocketServer(int, ServerType)</CODE></A></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="setPingPongMode(boolean)"><!-- --></A><H3>
setPingPongMode</H3>
<PRE>
public void <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.88"><B>setPingPongMode</B></A>(boolean&nbsp;pingPongMode)</PRE>
<DL>
<DD>Delegates to <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#setPingPongMode(boolean)"><CODE>SwiftSocketServer.setPingPongMode(boolean)</CODE></A>.
 <p>
 Note: When changed, will only apply the new setting to <strong>new</strong> clients.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pingPongMode</CODE> - Flag indicated if ping pong mode should be turned on yes /no.</DL>
</DD>
</DL>
<HR>

<A NAME="setPingPongMode(boolean, int, int)"><!-- --></A><H3>
setPingPongMode</H3>
<PRE>
public void <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.101"><B>setPingPongMode</B></A>(boolean&nbsp;pingPongMode,
                            int&nbsp;pingPongIntervalMs,
                            int&nbsp;pingPongTimeoutMs)</PRE>
<DL>
<DD>Delegates to <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#setPingPongMode(boolean, int, int)"><CODE>SwiftSocketServer.setPingPongMode(boolean, int, int)</CODE></A>.
 <p>
 Note: When changed, will only apply the new setting to <strong>new</strong> clients.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pingPongMode</CODE> - Flag indicated if ping pong mode should be turned on yes /no.<DD><CODE>pingPongIntervalMs</CODE> - Interval in milliseconds for ping messages to the client.<DD><CODE>pingPongTimeoutMs</CODE> - Timeout in milliseconds for a pong message to the client.</DL>
</DD>
</DL>
<HR>

<A NAME="registerClientMessageToServerType(int, java.lang.Class)"><!-- --></A><H3>
registerClientMessageToServerType</H3>
<PRE>
public void <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.112"><B>registerClientMessageToServerType</B></A>(int&nbsp;messageId,
                                              <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</A>&lt;? extends <A HREF="../../../org/codemonkey/swiftsocketserver/ClientMessageToServer.html" title="class in org.codemonkey.swiftsocketserver">ClientMessageToServer</A>&lt;<A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html" title="type parameter in WorldServer">T</A>&gt;&gt;&nbsp;messageType)</PRE>
<DL>
<DD>Registers a client-to-server message on the given unique identifier on the swift socket server, by delegating to
 <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#registerClientMessageToServerType(int, java.lang.Class)"><CODE>SwiftSocketServer.registerClientMessageToServerType(int, Class)</CODE></A>.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>messageId</CODE> - The unique identifier for this message type.<DD><CODE>messageType</CODE> - A <A HREF="../../../org/codemonkey/swiftsocketserver/ClientMessageToServer.html" title="class in org.codemonkey.swiftsocketserver"><CODE>ClientMessageToServer</CODE></A> sub type.</DL>
</DD>
</DL>
<HR>

<A NAME="registerServerMessageToClientId(int, java.lang.Class)"><!-- --></A><H3>
registerServerMessageToClientId</H3>
<PRE>
public void <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.123"><B>registerServerMessageToClientId</B></A>(int&nbsp;messageId,
                                            <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</A>&lt;? extends <A HREF="../../../org/codemonkey/swiftsocketserver/ServerMessageToClient.html" title="class in org.codemonkey.swiftsocketserver">ServerMessageToClient</A>&gt;&nbsp;messageType)</PRE>
<DL>
<DD>Registers a server-to-client message on the given unique identifier on the swift socket server, by delegating to
 <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#registerServerMessageToClientId(int, java.lang.Class)"><CODE>SwiftSocketServer.registerServerMessageToClientId(int, Class)</CODE></A>.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>messageId</CODE> - The unique identifier for this message type.<DD><CODE>messageType</CODE> - A <A HREF="../../../org/codemonkey/swiftsocketserver/ServerMessageToClient.html" title="class in org.codemonkey.swiftsocketserver"><CODE>ServerMessageToClient</CODE></A> sub type.</DL>
</DD>
</DL>
<HR>

<A NAME="start()"><!-- --></A><H3>
start</H3>
<PRE>
public void <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.132"><B>start</B></A>()</PRE>
<DL>
<DD>Calls <A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html#initWorld()"><CODE>WorldContext.initWorld()</CODE></A> before starting the server, after which the server starts handling client connections,
 incoming messages and world updates.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setFramesPerSecond(double)"><!-- --></A><H3>
setFramesPerSecond</H3>
<PRE>
public void <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.173"><B>setFramesPerSecond</B></A>(double&nbsp;framesPerSecond)</PRE>
<DL>
<DD>Changes how often the server invokes <A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html#updateWorld(double)"><CODE>WorldContext.updateWorld(double)</CODE></A> and how big the delta factor is (by recalculating
 seconds-per-frame).
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>framesPerSecond</CODE> - The number of frames per second (world updates per second).<DT><B>See Also:</B><DD><A HREF="../../../org/codemonkey/swiftworldserver/WorldServer.html" title="class in org.codemonkey.swiftworldserver"><CODE>WorldServer</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="stop()"><!-- --></A><H3>
stop</H3>
<PRE>
public void <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.181"><B>stop</B></A>()</PRE>
<DL>
<DD>Stops the Swift Socket Server by delegating this call to <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#stop()"><CODE>SwiftSocketServer.stop()</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="sendMessage(org.codemonkey.swiftsocketserver.ServerMessageToClient)"><!-- --></A><H3>
sendMessage</H3>
<PRE>
public void <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.191"><B>sendMessage</B></A>(<A HREF="../../../org/codemonkey/swiftsocketserver/ServerMessageToClient.html" title="class in org.codemonkey.swiftsocketserver">ServerMessageToClient</A>&nbsp;serverMessage)</PRE>
<DL>
<DD>Sends a message to the client context stored in the message by delegating this call to
 <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#sendMessage(org.codemonkey.swiftsocketserver.ServerMessageToClient)"><CODE>SwiftSocketServer.sendMessage(ServerMessageToClient)</CODE></A>.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>serverMessage</CODE> - The message to send to the client associated with it.</DL>
</DD>
</DL>
<HR>

<A NAME="broadcastMessage(org.codemonkey.swiftsocketserver.ServerMessageToClient)"><!-- --></A><H3>
broadcastMessage</H3>
<PRE>
public void <A HREF="../../../src-html/org/codemonkey/swiftworldserver/WorldServer.html#line.201"><B>broadcastMessage</B></A>(<A HREF="../../../org/codemonkey/swiftsocketserver/ServerMessageToClient.html" title="class in org.codemonkey.swiftsocketserver">ServerMessageToClient</A>&nbsp;serverMessage)</PRE>
<DL>
<DD>Send a message to all connected clients ignoring the client context in the message, by delegating this call to
 <A HREF="../../../org/codemonkey/swiftsocketserver/SwiftSocketServer.html#broadcastMessage(org.codemonkey.swiftsocketserver.ServerMessageToClient)"><CODE>SwiftSocketServer.broadcastMessage(ServerMessageToClient)</CODE></A>.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>serverMessage</CODE> - The message to send to all clients (ignoring clientContext on the message).</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/WorldServer.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/codemonkey/swiftworldserver/WorldContext.html" title="interface in org.codemonkey.swiftworldserver"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/codemonkey/swiftworldserver/WorldServer.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="WorldServer.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<i>Copyright &#169; 2009 under Apache v2 license.</i>
</BODY>
</HTML>
